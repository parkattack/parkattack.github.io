"use strict";function shuffle(a){for(var b,c,d=a.length;d>0;)c=Math.floor(Math.random()*d),d--,b=a[d],a[d]=a[c],a[c]=b;return a}angular.module("parkAttackWebApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","firebase","ui.gravatar"]),angular.module("ui.gravatar").config(["gravatarServiceProvider",function(a){a.defaults={size:40,"default":"monsterid"}}]),angular.module("parkAttackWebApp").run(["$rootScope","$location","Auth","User",function(a,b,c,d){a.auth=c,a.auth.$onAuth(function(b){a.authData=b,b&&b.uid&&(a.user=d.get(b.uid))}),a.debug="localhost"===b.host()}]),angular.module("parkAttackWebApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/steps",{templateUrl:"views/steps.html",controller:"StepsCtrl",controllerAs:"steps"}).otherwise({redirectTo:"/"})}]),angular.module("parkAttackWebApp").controller("MainCtrl",["$scope","$location","$routeParams","Auth","User",function(a,b,c,d,e){a.showRegistration=!1,a.logout=function(){d.$unauth()},a.go=function(c){c?d.$createUser({email:a.user.email,password:a.user.password}).then(function(c){d.$authWithPassword({email:a.user.email,password:a.user.password}).then(function(c){e.add(c.uid,{email:a.user.email,name:a.user.name,company:a.user.company,avatar:c.password.profileImageURL}),b.path("/steps")})["catch"](function(b){a.error=b})})["catch"](function(b){a.error=b}):d.$authWithPassword({email:a.user.email,password:a.user.password}).then(function(a){b.path("/steps")})["catch"](function(b){a.error=b})}}]),angular.module("parkAttackWebApp").constant("FIREBASE_URL","https://parkattack.firebaseio.com/"),angular.module("parkAttackWebApp").factory("Ref",["FIREBASE_URL",function(a){return new Firebase(a)}]),angular.module("parkAttackWebApp").factory("Auth",["$firebaseAuth","$rootScope","Ref",function(a,b,c){return a(c)}]),angular.module("parkAttackWebApp").factory("StepChallenge",["$firebaseArray","Ref",function(a,b){return{get:function(c){return a(b.child("StepChallenge").child(c))},add:function(c,d){return b.child("StepChallenge").child(c).set(d),a(b.child("StepChallenge").child(c))}}}]),angular.module("parkAttackWebApp").factory("Users",["$firebaseArray","Ref",function(a,b){return a(b.child("Users"))}]),angular.module("parkAttackWebApp").factory("User",["$firebaseObject","Ref",function(a,b){return{get:function(c){return a(b.child("Users").child(c))},add:function(c,d){return b.child("Users").child(c).set(d),a(b.child("Users").child(c))}}}]),angular.module("parkAttackWebApp").service("ProperNounFormatter",function(){return{spacify:function(a,b){return a.indexOf(".")>0||a.indexOf("_")>0||a.indexOf("-")>0?a=a.split(/[\._\-]/).map(function(a){return a.charAt(0).toUpperCase()+a.slice(1)}).join(" "):/[A-Z]/.test(a)&&(a=b?a.replace(/([a-z])([A-Z])/g,"$1 $2"):a.replace(/^[a-z]|[A-Z]/g,function(a,b){return 0===b?a:" "+a})),a}}}),angular.module("parkAttackWebApp").controller("StepsCtrl",["$scope","Users",function(a,b){a.prizes=shuffle([{name:"Fame"},{name:"Glory"},{name:"Adulation"}]),a.attending=b}]),angular.module("parkAttackWebApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/login.html",'<form> <div class="form-group col-md-4"> <input type="email" class="form-control" placeholder="email" required autofocus> </div> <div class="form-group col-md-4"> <input type="password" class="form-control" placeholder="password" required> </div> <div class="form-group col-md-4"> <input type="submit" class="btn btn-primary" value="sign up / login"> </div> </form>'),a.put("views/main.html",'<p class="text-center"> <img src="images/parkattack500x425.97a911c9.png" alt="let\'s play" style="width: 500px"> <img src="images/ready-to-play.c454795e.png" alt="are you ready to play" style="width: 100%; max-width: 923px"> </p> <div class="text-center" style="margin-top: 0; margin-bottom: 0; padding-top: 0; padding-bottom: 0"> <img src="images/09-04.6577a919.png" alt="September 4th" style="width: 100%; max-width: 988px"> </div> <div class="text-center" style="margin-top: 0; margin-bottom: 30px; padding-top: 0; padding-bottom: 0"> <img src="images/hashtag-parkattack.8733e745.png" alt="September 4th" style="width: 100%; max-width: 988px"> </div> <div class="div-rounded" style="background-color: #e3026c; padding-top: 50px; padding-bottom: 50px" ng-show="!user.uid"> <div class="text-center"> <img src="images/sign-up.dc553af2.png" style="width: 100%; max-width: 988px"> </div> <div class="container" style="padding-top: 50px"> <div ng-show="user.$id"> <h4> <img ng-src="{{user.avatar}}" ng-show="user.avatar" class="img-rounded" style="width:30px; height: 30px"> Hi {{user.name}}! </h4> <p><a href ng-click="logout()">logout</a></p> </div> <div ng-show="!user.$id"> <form ng-submit="go(showRegistration)" ng-show="!user.avatar"> <div class="row" ng-hide="!showRegistration"> <div class="form-group col-md-4"> <input type="text" class="form-control" placeholder="your name" ng-model="user.name"> </div> <div class="form-group col-md-4"> <input type="text" class="form-control" placeholder="company" ng-model="user.company"> </div> </div> <div class="row"> <div class="form-group col-md-4"> <input type="email" class="form-control" placeholder="email" ng-model="user.email" required> </div> <div class="form-group col-md-4"> <input type="password" class="form-control" placeholder="password" ng-model="user.password" required> </div> <div class="col-md-2"> <input type="submit" class="form-control btn btn-primary" value="login" style="display: inline"> </div> <div class="col-md-2"> <input type="button" class="form-control btn btn-default" value="sign up" ng-click="showRegistration=true" style="display: inline" ng-hide="showRegistration"> </div> </div> </form></div>  </div> </div> <div class="text-center" style="margin-top: 0; margin-bottom: 0; padding-top: 20px; padding-bottom: 0" ng-show="!user.uid"> <div class="container"> <img src="images/hosted-by.a9fd5aec.png" alt="Hosted By"> </div> </div> <div class="row" ng-show="debug"> <pre>{{authData | json}}</pre> <pre>{{user | json}}</pre> <pre>{{error | json}}</pre> </div>'),a.put("views/steps.html",'<div class="row" ng-show="user.$id"> <p class="text-center"> <img src="images/parkattack500x425.97a911c9.png" alt="let\'s play" style="width: 500px"> <img src="images/ready-to-play.c454795e.png" alt="are you ready to play" style="width: 100%; max-width: 923px"> </p> <div class="col-md-6 text-center"> <img src="images/launchpad-faces.5a469d6e.jpg" alt="https://www.flickr.com/photos/lancesh/190382917" class="img-rounded" style="width: 90%;box-shadow: 10px 10px 5px grey"> </div> <div class="col-md-6"> <h3>Escape the confines of your office, liberate your desk and get ready...</h3> <p>Come to Park Attack on the first Friday of every month, in Phase 2 for an hour of fun and games, friendly competitions and prizes.</p> <p>This is the exciting, energetic new way to network with others on the park and refresh your mind.</p> <p>Are you game? Entry costs Â£1.</p> <h3>Make an impact!</h3> <p>All money raised goes to charity and will be distributed by the <a href="http://www.drakefoundation.co.uk/pages/grants/73">Drake Impact Fund</a> to projects that combat child poverty in Plymouth.</p> <h3>Lets play!</h3> </div> </div> <div class="row" ng-show="user.$id"> <div class="col-md-6 text-center"> <h2>Prizes</h2> <ul class="list-unstyled"> <li ng-repeat="prize in prizes"> {{prize.name}} </li> </ul> </div> <div class="col-md-6 text-center"> <h2>Who\'s attending?</h2> <ul class="list-inline"> <li ng-repeat="attendee in attending | orderBy:\'name\'" style="padding: .5em"> <div class="img-rounded" style="background-color: #f0f0f0; padding: .5em"> <img gravatar-src-once="attendee.email" gravatar-size="30" class="img-rounded"> <span style="margin-left:.5em">{{attendee.name}}</span> </div> </li> </ul> <p class="small text-muted"><em>Profile images above are managed by gravatar and associated with the email address used to sign up.</em><br>Set yours at: <a href="http://en.gravatar.com/">gravatar.com</a>.</p> </div> </div> <div class="text-center" style="margin-top: 0; margin-bottom: 0; padding-top: 20px; padding-bottom: 0" ng-show="!user.uid"> <div class="container"> <img src="images/hosted-by.a9fd5aec.png" alt="Hosted By"> </div> </div> <div class="row" ng-show="debug"> <pre>{{authData | json}}</pre> <pre>{{user | json}}</pre> <pre>{{attending | json}}</pre> <pre>{{error | json}}</pre> </div>')}]);